"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _config=require("../../config"),_functions=require("../functions"),Gamedig=require("gamedig"),Discord=require("discord.js"),_default={name:"server",description:"Returns info on the public server",args:!1,guildOnly:!0,aliases:["si","server"],disabled:!1,execute:function execute(a,b,c){if((0,_functions.log)("Entered ".concat(this.name," command file")),b[0]){// Handles Arma server embed
var d=_config.servers.find(function(a){return a.name===b[0].toLowerCase()});if(!d)return a.reply("server not found.");if("arma"!==d.game)return a.reply("you must specify an Arma 3 Server.");Gamedig.query({type:"arma3",host:d.ip,port:d.port}).then(function(b){var c={name:b.name,players:b.raw.numplayers,maxplayers:b.maxplayers,map:b.map,mission:b.raw.game};""===c.map&&(c.map="Unselected"),""===c.mission&&(c.mission="Unselected");var d=new Discord.MessageEmbed().setColor("#0099ff").setTitle(c.name).addFields({name:"Players",value:"".concat(c.players," / ").concat(c.maxplayers),inline:!0},{name:"Selected Map",value:c.map,inline:!0},{name:"Selected Mission",value:c.mission}).setTimestamp().setFooter("Server Status powered by Blueberries");a.channel.send(d)})["catch"](function(b){console.log(b),b&&a.reply("that server is offline.")})}else// Handles Squad
c.generateEmbed().then(function(b){a.channel.send(b).then(function(a){a.react("\uD83D\uDD04")})})}};exports["default"]=_default;